{"ast":null,"code":"var _jsxFileName = \"/Users/benbradley/Desktop/CS_Classwork/bbradz.github.io/src/components/Library.js\",\n  _s2 = $RefreshSig$();\n// Library.js\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport { runGameOfLife } from \"../functionality.js\"; // or import whichever functions you need\nimport sourcesRawData from \"../input.json\";\nimport similaritiesRawData from \"../document_similarities.json\";\nimport \"../css/library.css\";\n\n// =====================\n// HELPER: performSearch\n// =====================\n/*\n  Filters the readingListData array in React state.\n  Returns only items whose title, description, or tag match the term.\n*/\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction performSearch(term, data) {\n  const lowerTerm = term.toLowerCase();\n  return data.filter(item => {\n    const textToSearch = [item.title, item.description || \"\", ...(item.tags || [])].join(\" \").toLowerCase();\n    return textToSearch.includes(lowerTerm);\n  });\n}\n\n// =====================\n// Library Component\n// =====================\nfunction Library() {\n  _s2();\n  var _s = $RefreshSig$();\n  // --- State Declarations ---\n  const [theme, setTheme] = useState(\"dark\");\n  const scrollToTopButtonRef = useRef(null);\n  // Full reading list data\n  const [readingListData, setReadingListData] = useState([]);\n  // This subset is actually shown in the UI\n  const [currentReadingListData, setCurrentReadingListData] = useState([]);\n  // Precomputed similarities\n  const [documentSimilaritiesData, setDocumentSimilaritiesData] = useState(null);\n\n  // --- Effects (Lifecycle) ---\n  // 1. Toggle theme\n  useEffect(() => {\n    document.body.setAttribute(\"data-theme\", theme);\n  }, [theme]);\n\n  // 2. Kick off Game of Life\n  useEffect(() => {\n    runGameOfLife(\"gameOfLife\");\n  }, []);\n\n  // 3. Load reading list + similarities from JSON on mount\n  useEffect(() => {\n    try {\n      const list = sourcesRawData.map((item, index) => ({\n        ...item,\n        embedding: item.embedding || [],\n        originalIndex: index\n      }));\n      setReadingListData(list);\n      setCurrentReadingListData(list);\n      setDocumentSimilaritiesData(similaritiesRawData);\n    } catch (error) {\n      console.error(\"Error importing reading list data:\", error);\n    }\n  }, []);\n\n  // 4. After readingListData changes, create DOM and dispatch event so the graph picks it up\n  useEffect(() => {\n    if (readingListData.length > 0) {\n      window.initializeReadingListHTML(readingListData);\n\n      // Let the DocumentGraph know there's fresh DOM to read\n      setTimeout(() => {\n        window.dispatchEvent(window.documentVisibilityChanged);\n      }, 0);\n    }\n  }, [readingListData]);\n\n  // Toggle theme\n  const toggleTheme = () => {\n    setTheme(current => current === \"dark\" ? \"light\" : \"dark\");\n  };\n\n  // Scroll to top\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n\n  // =====================\n  // DocumentGraph Component\n  // =====================\n  const DocumentGraph = ({\n    width,\n    height,\n    readingListData,\n    documentSimilaritiesData\n  }) => {\n    _s();\n    /*\n      This is mostly identical to your existing code, except that it uses the\n      `documentVisibilityChanged` event for updates.\n    */\n\n    const containerRef = useRef(null);\n    const [error, setError] = useState(null);\n    const [visibleDocs, setVisibleDocs] = useState([]);\n    const [isSmallScreen, setIsSmallScreen] = useState(false);\n    const svgRef = useRef(null);\n    const simulationRef = useRef(null);\n    const nodeTitleGroupRef = useRef(null);\n\n    // Debounce\n    const debounce = (func, wait) => {\n      let timeout;\n      return function (...args) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), wait);\n      };\n    };\n\n    // Check screen size\n    const checkScreenSize = () => {\n      setIsSmallScreen(window.innerWidth <= 768);\n    };\n    const debouncedCheckScreenSize = useCallback(debounce(checkScreenSize, 100), []);\n    useEffect(() => {\n      checkScreenSize();\n      window.addEventListener(\"resize\", debouncedCheckScreenSize);\n      return () => window.removeEventListener(\"resize\", debouncedCheckScreenSize);\n      // eslint-disable-next-line\n    }, []);\n\n    // Called on each re-render or when visibleDocs changes\n    useEffect(() => {\n      if (!isSmallScreen && containerRef.current) {\n        initializeGraph();\n      }\n      // eslint-disable-next-line\n    }, [isSmallScreen, visibleDocs, width, height, documentSimilaritiesData]);\n\n    // Helper: find DOM items that are visible\n    const getVisibleDocuments = useCallback(() => {\n      const items = Array.from(document.querySelectorAll(\"#reading-list li\"));\n      const visibleItems = items.filter(item => item.style.display !== \"none\");\n      if (visibleItems.length === 0) {\n        // If none are visible but total items exist, return empty\n        // If no items at all, fallback to the entire readingListData\n        return items.length === 0 ? readingListData : [];\n      }\n      return visibleItems.map(item => {\n        const titleEl = item.querySelector(\".item-title strong\");\n        if (!titleEl) return null;\n        // Title is in quotes -> \"Title\" by ...\n        const match = titleEl.textContent.match(/\"([^\"]+)\"/);\n        const docTitle = match ? match[1] : null;\n        if (!docTitle) return null;\n        return readingListData.find(doc => doc.title === docTitle);\n      }).filter(Boolean);\n    }, [readingListData]);\n\n    // Event listener: updates visibleDocs when the DOM changes (search, filter, etc.)\n    useEffect(() => {\n      const handleVisibilityChange = () => {\n        const currentVisibleDocs = getVisibleDocuments() || [];\n        const currentTitles = currentVisibleDocs.map(d => d.title).sort();\n        const oldTitles = visibleDocs.map(d => d.title).sort();\n        if (JSON.stringify(currentTitles) !== JSON.stringify(oldTitles)) {\n          setVisibleDocs(currentVisibleDocs);\n        }\n      };\n      const throttledHandler = debounce(handleVisibilityChange, 200);\n      window.addEventListener(\"documentVisibilityChanged\", throttledHandler);\n\n      // Cleanup\n      return () => {\n        window.removeEventListener(\"documentVisibilityChanged\", throttledHandler);\n      };\n    }, [getVisibleDocuments, visibleDocs, debounce]);\n\n    // Cleanup function\n    const cleanupGraph = useCallback(() => {\n      if (simulationRef.current) {\n        simulationRef.current.stop();\n        simulationRef.current = null;\n      }\n      if (containerRef.current) {\n        d3.select(containerRef.current).selectAll(\"*\").remove();\n      }\n    }, []);\n\n    // Main function for building the graph\n    const initializeGraph = async () => {\n      if (!containerRef.current) return;\n      if (!documentSimilaritiesData) {\n        console.log(\"No similarities data loaded yet.\");\n        return;\n      }\n      cleanupGraph();\n      const container = d3.select(containerRef.current);\n      const svg = container.append(\"svg\").attr(\"width\", width).attr(\"height\", height).attr(\"className\", \"rounded-lg\");\n      svgRef.current = svg;\n\n      // Background\n      svg.append(\"rect\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").attr(\"fill\", \"var(--graph-background)\");\n      if (!visibleDocs.length) {\n        // If no documents are visible, show a message\n        const textGroup = svg.append(\"g\").attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n        textGroup.append(\"text\").attr(\"text-anchor\", \"middle\").attr(\"fill\", \"var(--text-color)\").text(\"No documents to display\");\n        return;\n      }\n      const initialTranslateX = width / 3 - 25;\n      const initialTranslateY = height / 4 + 10;\n      const initialScale = 0.45;\n      const g = svg.append(\"g\");\n      const zoom = d3.zoom().scaleExtent([initialScale, 3]).translateExtent([[0, 0], [width, height]]).on(\"zoom\", event => g.attr(\"transform\", event.transform));\n      svg.call(zoom.transform, d3.zoomIdentity.translate(initialTranslateX, initialTranslateY).scale(initialScale));\n      svg.call(zoom);\n\n      // Build node data\n      const visibleDocIndicesMap = {};\n      visibleDocs.forEach((doc, i) => {\n        visibleDocIndicesMap[doc.originalIndex] = i;\n      });\n      const nodes = visibleDocs.map((doc, i) => ({\n        id: String(i),\n        title: doc.title,\n        fullText: doc.description,\n        tags: doc.tags,\n        readTime: doc.readTime,\n        releaseDate: doc.releaseDate,\n        isRead: doc.isRead\n      }));\n\n      // Build link data\n      let links = documentSimilaritiesData.filter(link => {\n        return link.source in visibleDocIndicesMap && link.target in visibleDocIndicesMap;\n      }).map(link => ({\n        ...link,\n        source: String(visibleDocIndicesMap[link.source]),\n        target: String(visibleDocIndicesMap[link.target])\n      }));\n      if (!links || links.length === 0) {\n        links = [];\n        console.log(\"No relevant pre-calculated similarities for visible docs.\");\n      }\n      initializeSimulation(nodes, links, width, height, g, svg, visibleDocs.map(d => d.readTime));\n    };\n\n    // Helpers for the simulation\n    const boundPosition = (pos, dimension, pad) => {\n      return Math.max(pad, Math.min(dimension - pad, pos));\n    };\n    const forceBoundary = (width, height, nodes) => {\n      const padding = 4;\n      const xMin = padding;\n      const xMax = width - padding;\n      const yMin = padding;\n      const yMax = height - padding;\n      const strength = 0.05;\n      function force(alpha) {\n        nodes.forEach(node => {\n          if (node.x < xMin) node.vx += (xMin - node.x) * strength * alpha;\n          if (node.x > xMax) node.vx += (xMax - node.x) * strength * alpha;\n          if (node.y < yMin) node.vy += (yMin - node.y) * strength * alpha;\n          if (node.y > yMax) node.vy += (yMax - node.y) * strength * alpha;\n        });\n      }\n      return force;\n    };\n    const normalizeReadTime = (readTime, minT, maxT) => {\n      const minR = 5,\n        maxR = 20;\n      if (maxT === minT) return (minR + maxR) / 2;\n      const logMin = Math.log(minT + 1);\n      const logMax = Math.log(maxT + 1);\n      const logVal = Math.log(readTime + 1);\n      return (logVal - logMin) / (logMax - logMin) * (maxR - minR) + minR;\n    };\n\n    // Initialize the simulation\n    const initializeSimulation = (nodes, links, width, height, g, svg, readTimes) => {\n      // Place nodes near center\n      nodes.forEach(node => {\n        node.x = width / 2 + (Math.random() - 0.5) * 40;\n        node.y = height / 2 + (Math.random() - 0.5) * 40;\n      });\n      simulationRef.current = d3.forceSimulation().nodes(nodes).force(\"link\", d3.forceLink(links).id(d => d.id).distance(50).strength(0.5)).force(\"charge\", d3.forceManyBody().strength(-300)).force(\"center\", d3.forceCenter(width / 2, height / 2)).force(\"x\", d3.forceX(width / 2).strength(0.1)).force(\"y\", d3.forceY(height / 2).strength(0.1)).force(\"collision\", d3.forceCollide().strength(0.1).radius(d => normalizeReadTime(d.readTime, Math.min(...readTimes), Math.max(...readTimes)) + 10)).force(\"boundary\", forceBoundary(width, height, nodes)).alpha(0.3).velocityDecay(0.4).alphaDecay(0.05).alphaMin(0.001);\n      const link = g.append(\"g\").selectAll(\"line\").data(links).join(\"line\").attr(\"stroke\", \"var(--edge-color)\").attr(\"stroke-width\", d => d.width).attr(\"stroke-opacity\", \"var(--edge-opacity)\");\n      const nodeGroup = g.append(\"g\").attr(\"className\", \"nodes\");\n      const node = nodeGroup.selectAll(\"g\").data(nodes).join(\"g\").attr(\"transform\", d => `translate(${d.x},${d.y})`).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n      node.append(\"circle\").attr(\"r\", d => normalizeReadTime(d.readTime, Math.min(...readTimes), Math.max(...readTimes))).attr(\"fill\", d => d.isRead ? \"#4a9eff\" : \"var(--node-color)\").attr(\"stroke\", \"var(--node-stroke-color)\").on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"fill\", \"#8ACE00\");\n        link.attr(\"stroke\", l => l.source.id === d.id || l.target.id === d.id ? \"#8ACE00\" : \"var(--edge-color)\").attr(\"stroke-width\", l => l.source.id === d.id || l.target.id === d.id ? 3 : l.width);\n\n        // Title tooltip\n        const titleGroup = nodeGroup.append(\"g\").attr(\"className\", \"node-title-group\").attr(\"transform\", `translate(${d.x},${d.y})`);\n        nodeTitleGroupRef.current = titleGroup;\n        titleGroup.append(\"text\").attr(\"className\", \"node-title\").attr(\"x\", 10).attr(\"y\", 5).attr(\"fill\", \"var(--text-color)\").text(d.title);\n      }).on(\"mouseout\", function (event, d) {\n        d3.select(this).attr(\"fill\", d => d.isRead ? \"#4a9eff\" : \"var(--node-color)\");\n        link.attr(\"stroke\", \"var(--edge-color)\").attr(\"stroke-width\", l => l.width);\n\n        // Remove title\n        if (nodeTitleGroupRef.current) {\n          nodeTitleGroupRef.current.remove();\n          nodeTitleGroupRef.current = null;\n        }\n      });\n      simulationRef.current.on(\"tick\", () => {\n        link.attr(\"x1\", d => boundPosition(d.source.x, width, -200)).attr(\"y1\", d => boundPosition(d.source.y, height, -200)).attr(\"x2\", d => boundPosition(d.target.x, width, -200)).attr(\"y2\", d => boundPosition(d.target.y, height, -200));\n        node.attr(\"transform\", d => {\n          const x = boundPosition(d.x, width, -200);\n          const y = boundPosition(d.y, height, -200);\n          return `translate(${x},${y})`;\n        });\n      });\n    };\n\n    // Drag handlers\n    const dragstarted = (event, d) => {\n      if (!event.active) simulationRef.current.alphaTarget(0.01).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n      // Increase link strength\n      simulationRef.current.force(\"link\").strength(0.8);\n      simulationRef.current.alphaTarget(0.3).restart();\n    };\n    const dragged = (event, d) => {\n      simulationRef.current.alphaTarget(0.01);\n      d.fx = boundPosition(event.x, width, -200);\n      d.fy = boundPosition(event.y, height, -200);\n    };\n    const dragended = (event, d) => {\n      if (!event.active) simulationRef.current.alphaTarget(0.01);\n      d.fx = null;\n      d.fy = null;\n    };\n    if (isSmallScreen) return null;\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-32 rounded-lg\",\n        style: {\n          backgroundColor: \"var(--graph-background)\",\n          color: \"var(--text-color)\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"w-full h-full\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 12\n    }, this);\n  };\n\n  // --- JSX Markup ---\n  _s(DocumentGraph, \"PGv0FVk05Wh43eKvMFcdn9ltFnQ=\");\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n      charSet: \"UTF-8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1.0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n      children: \"bb.radz\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"gameOfLife\",\n      className: \"game-of-life\",\n      width: \"200\",\n      height: \"400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"logo\",\n          children: \"BBradz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"theme-toggle\",\n          onClick: toggleTheme,\n          \"aria-label\": \"Toggle theme\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"sun-icon\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"12\",\n              cy: \"12\",\n              r: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 2v2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 20v2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4.93 4.93l1.41 1.41\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M17.66 17.66l1.41 1.41\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M2 12h2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M20 12h2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M6.34 17.66l-1.41 1.41\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19.07 4.93l-1.41 1.41\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"moon-icon\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"nav-links\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/posts\",\n          className: \"nav-link\",\n          children: \"Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/library\",\n          className: \"nav-link\",\n          children: \"Library\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"nav-link\",\n          children: \"About Me\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reading-list-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lib-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"name\",\n          style: {\n            marginBottom: \"10px\"\n          },\n          children: \"Library\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"search\",\n            placeholder: \"Search by term...\",\n            onInput: e => {\n              // Filter in React state\n              const filtered = performSearch(e.target.value, readingListData);\n              setCurrentReadingListData(filtered);\n\n              // Rebuild the reading list DOM\n              window.initializeReadingListHTML(filtered);\n\n              // Let the graph know\n              setTimeout(() => {\n                window.dispatchEvent(window.documentVisibilityChanged);\n              }, 0);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sort-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sort-bar-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"sort-release\",\n              onClick: event => window.toggleSort(event.target, \"release\", \"desc\", currentReadingListData),\n              children: [\"Sort by Release Date \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sort-arrow\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"sort-time\",\n              onClick: event => window.toggleSort(event.target, \"time\", \"desc\", currentReadingListData),\n              children: [\"Sort by Time to Read \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sort-arrow\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 667,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"filter-read\",\n              onClick: event => window.toggleReadFilter(event.target, currentReadingListData),\n              children: \"Filter: All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"filter-YT\",\n              onClick: event => window.toggleFilterType(event.target, \"YT\", currentReadingListData),\n              children: \"YT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"filter-Arxiv\",\n              onClick: event => window.toggleFilterType(event.target, \"Arxiv\", currentReadingListData),\n              children: \"Arxiv\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"filter-Site\",\n              onClick: event => window.toggleFilterType(event.target, \"Site\", currentReadingListData),\n              children: \"Site\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"active-tags\",\n            className: \"active-tag\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          id: \"reading-list\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"graph-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"root\",\n          className: \"graph-inner\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: /*#__PURE__*/_jsxDEV(DocumentGraph, {\n              width: 400,\n              height: 400,\n              readingListData: currentReadingListData,\n              documentSimilaritiesData: documentSimilaritiesData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      ref: scrollToTopButtonRef,\n      onClick: scrollToTop,\n      className: \"scroll-to-top\",\n      \"aria-label\": \"Scroll to top\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M12 19V5\",\n          stroke: \"#fff\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M5 12L12 5L19 12\",\n          stroke: \"#fff\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s2(Library, \"5oHwjigNCyVx827cEUocNcDA0X8=\");\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Link","d3","runGameOfLife","sourcesRawData","similaritiesRawData","jsxDEV","_jsxDEV","Fragment","_Fragment","performSearch","term","data","lowerTerm","toLowerCase","filter","item","textToSearch","title","description","tags","join","includes","Library","_s2","_s","$RefreshSig$","theme","setTheme","scrollToTopButtonRef","readingListData","setReadingListData","currentReadingListData","setCurrentReadingListData","documentSimilaritiesData","setDocumentSimilaritiesData","document","body","setAttribute","list","map","index","embedding","originalIndex","error","console","length","window","initializeReadingListHTML","setTimeout","dispatchEvent","documentVisibilityChanged","toggleTheme","current","scrollToTop","scrollTo","top","behavior","DocumentGraph","width","height","containerRef","setError","visibleDocs","setVisibleDocs","isSmallScreen","setIsSmallScreen","svgRef","simulationRef","nodeTitleGroupRef","debounce","func","wait","timeout","args","clearTimeout","apply","checkScreenSize","innerWidth","debouncedCheckScreenSize","addEventListener","removeEventListener","initializeGraph","getVisibleDocuments","items","Array","from","querySelectorAll","visibleItems","style","display","titleEl","querySelector","match","textContent","docTitle","find","doc","Boolean","handleVisibilityChange","currentVisibleDocs","currentTitles","d","sort","oldTitles","JSON","stringify","throttledHandler","cleanupGraph","stop","select","selectAll","remove","log","container","svg","append","attr","textGroup","text","initialTranslateX","initialTranslateY","initialScale","g","zoom","scaleExtent","translateExtent","on","event","transform","call","zoomIdentity","translate","scale","visibleDocIndicesMap","forEach","i","nodes","id","String","fullText","readTime","releaseDate","isRead","links","link","source","target","initializeSimulation","boundPosition","pos","dimension","pad","Math","max","min","forceBoundary","padding","xMin","xMax","yMin","yMax","strength","force","alpha","node","x","vx","y","vy","normalizeReadTime","minT","maxT","minR","maxR","logMin","logMax","logVal","readTimes","random","forceSimulation","forceLink","distance","forceManyBody","forceCenter","forceX","forceY","forceCollide","radius","velocityDecay","alphaDecay","alphaMin","nodeGroup","drag","dragstarted","dragged","dragended","l","titleGroup","active","alphaTarget","restart","fx","fy","className","backgroundColor","color","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","charSet","name","content","onClick","viewBox","fill","xmlns","cx","cy","r","to","marginBottom","type","placeholder","onInput","e","filtered","value","toggleSort","toggleReadFilter","toggleFilterType","stroke","strokeWidth","strokeLinecap","strokeLinejoin","_c","$RefreshReg$"],"sources":["/Users/benbradley/Desktop/CS_Classwork/bbradz.github.io/src/components/Library.js"],"sourcesContent":["// Library.js\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport { runGameOfLife } from \"../functionality.js\"; // or import whichever functions you need\nimport sourcesRawData from \"../input.json\";\nimport similaritiesRawData from \"../document_similarities.json\";\nimport \"../css/library.css\";\n\n// =====================\n// HELPER: performSearch\n// =====================\n/*\n  Filters the readingListData array in React state.\n  Returns only items whose title, description, or tag match the term.\n*/\nfunction performSearch(term, data) {\n  const lowerTerm = term.toLowerCase();\n  return data.filter((item) => {\n    const textToSearch = [\n      item.title,\n      item.description || \"\",\n      ...(item.tags || []),\n    ]\n      .join(\" \")\n      .toLowerCase();\n    return textToSearch.includes(lowerTerm);\n  });\n}\n\n// =====================\n// Library Component\n// =====================\nfunction Library() {\n  // --- State Declarations ---\n  const [theme, setTheme] = useState(\"dark\");\n  const scrollToTopButtonRef = useRef(null);\n  // Full reading list data\n  const [readingListData, setReadingListData] = useState([]);\n  // This subset is actually shown in the UI\n  const [currentReadingListData, setCurrentReadingListData] = useState([]);\n  // Precomputed similarities\n  const [documentSimilaritiesData, setDocumentSimilaritiesData] =\n    useState(null);\n\n  // --- Effects (Lifecycle) ---\n  // 1. Toggle theme\n  useEffect(() => {\n    document.body.setAttribute(\"data-theme\", theme);\n  }, [theme]);\n\n  // 2. Kick off Game of Life\n  useEffect(() => {\n    runGameOfLife(\"gameOfLife\");\n  }, []);\n\n  // 3. Load reading list + similarities from JSON on mount\n  useEffect(() => {\n    try {\n      const list = sourcesRawData.map((item, index) => ({\n        ...item,\n        embedding: item.embedding || [],\n        originalIndex: index,\n      }));\n\n      setReadingListData(list);\n      setCurrentReadingListData(list);\n      setDocumentSimilaritiesData(similaritiesRawData);\n    } catch (error) {\n      console.error(\"Error importing reading list data:\", error);\n    }\n  }, []);\n\n  // 4. After readingListData changes, create DOM and dispatch event so the graph picks it up\n  useEffect(() => {\n    if (readingListData.length > 0) {\n      window.initializeReadingListHTML(readingListData);\n\n      // Let the DocumentGraph know there's fresh DOM to read\n      setTimeout(() => {\n        window.dispatchEvent(window.documentVisibilityChanged);\n      }, 0);\n    }\n  }, [readingListData]);\n\n  // Toggle theme\n  const toggleTheme = () => {\n    setTheme((current) => (current === \"dark\" ? \"light\" : \"dark\"));\n  };\n\n  // Scroll to top\n  const scrollToTop = () => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  };\n\n  // =====================\n  // DocumentGraph Component\n  // =====================\n  const DocumentGraph = ({\n    width,\n    height,\n    readingListData,\n    documentSimilaritiesData,\n  }) => {\n    /*\n      This is mostly identical to your existing code, except that it uses the\n      `documentVisibilityChanged` event for updates.\n    */\n\n    const containerRef = useRef(null);\n    const [error, setError] = useState(null);\n    const [visibleDocs, setVisibleDocs] = useState([]);\n    const [isSmallScreen, setIsSmallScreen] = useState(false);\n    const svgRef = useRef(null);\n    const simulationRef = useRef(null);\n    const nodeTitleGroupRef = useRef(null);\n\n    // Debounce\n    const debounce = (func, wait) => {\n      let timeout;\n      return function (...args) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), wait);\n      };\n    };\n\n    // Check screen size\n    const checkScreenSize = () => {\n      setIsSmallScreen(window.innerWidth <= 768);\n    };\n    const debouncedCheckScreenSize = useCallback(\n      debounce(checkScreenSize, 100),\n      []\n    );\n\n    useEffect(() => {\n      checkScreenSize();\n      window.addEventListener(\"resize\", debouncedCheckScreenSize);\n      return () =>\n        window.removeEventListener(\"resize\", debouncedCheckScreenSize);\n      // eslint-disable-next-line\n    }, []);\n\n    // Called on each re-render or when visibleDocs changes\n    useEffect(() => {\n      if (!isSmallScreen && containerRef.current) {\n        initializeGraph();\n      }\n      // eslint-disable-next-line\n    }, [isSmallScreen, visibleDocs, width, height, documentSimilaritiesData]);\n\n    // Helper: find DOM items that are visible\n    const getVisibleDocuments = useCallback(() => {\n      const items = Array.from(document.querySelectorAll(\"#reading-list li\"));\n      const visibleItems = items.filter(\n        (item) => item.style.display !== \"none\"\n      );\n      if (visibleItems.length === 0) {\n        // If none are visible but total items exist, return empty\n        // If no items at all, fallback to the entire readingListData\n        return items.length === 0 ? readingListData : [];\n      }\n\n      return visibleItems\n        .map((item) => {\n          const titleEl = item.querySelector(\".item-title strong\");\n          if (!titleEl) return null;\n          // Title is in quotes -> \"Title\" by ...\n          const match = titleEl.textContent.match(/\"([^\"]+)\"/);\n          const docTitle = match ? match[1] : null;\n          if (!docTitle) return null;\n          return readingListData.find((doc) => doc.title === docTitle);\n        })\n        .filter(Boolean);\n    }, [readingListData]);\n\n    // Event listener: updates visibleDocs when the DOM changes (search, filter, etc.)\n    useEffect(() => {\n      const handleVisibilityChange = () => {\n        const currentVisibleDocs = getVisibleDocuments() || [];\n        const currentTitles = currentVisibleDocs.map((d) => d.title).sort();\n        const oldTitles = visibleDocs.map((d) => d.title).sort();\n\n        if (JSON.stringify(currentTitles) !== JSON.stringify(oldTitles)) {\n          setVisibleDocs(currentVisibleDocs);\n        }\n      };\n\n      const throttledHandler = debounce(handleVisibilityChange, 200);\n      window.addEventListener(\"documentVisibilityChanged\", throttledHandler);\n\n      // Cleanup\n      return () => {\n        window.removeEventListener(\n          \"documentVisibilityChanged\",\n          throttledHandler\n        );\n      };\n    }, [getVisibleDocuments, visibleDocs, debounce]);\n\n    // Cleanup function\n    const cleanupGraph = useCallback(() => {\n      if (simulationRef.current) {\n        simulationRef.current.stop();\n        simulationRef.current = null;\n      }\n      if (containerRef.current) {\n        d3.select(containerRef.current).selectAll(\"*\").remove();\n      }\n    }, []);\n\n    // Main function for building the graph\n    const initializeGraph = async () => {\n      if (!containerRef.current) return;\n      if (!documentSimilaritiesData) {\n        console.log(\"No similarities data loaded yet.\");\n        return;\n      }\n\n      cleanupGraph();\n      const container = d3.select(containerRef.current);\n      const svg = container\n        .append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .attr(\"className\", \"rounded-lg\");\n\n      svgRef.current = svg;\n\n      // Background\n      svg\n        .append(\"rect\")\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"100%\")\n        .attr(\"fill\", \"var(--graph-background)\");\n\n      if (!visibleDocs.length) {\n        // If no documents are visible, show a message\n        const textGroup = svg\n          .append(\"g\")\n          .attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n        textGroup\n          .append(\"text\")\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"fill\", \"var(--text-color)\")\n          .text(\"No documents to display\");\n        return;\n      }\n\n      const initialTranslateX = width / 3 - 25;\n      const initialTranslateY = height / 4 + 10;\n      const initialScale = 0.45;\n\n      const g = svg.append(\"g\");\n\n      const zoom = d3\n        .zoom()\n        .scaleExtent([initialScale, 3])\n        .translateExtent([\n          [0, 0],\n          [width, height],\n        ])\n        .on(\"zoom\", (event) => g.attr(\"transform\", event.transform));\n\n      svg.call(\n        zoom.transform,\n        d3.zoomIdentity\n          .translate(initialTranslateX, initialTranslateY)\n          .scale(initialScale)\n      );\n      svg.call(zoom);\n\n      // Build node data\n      const visibleDocIndicesMap = {};\n      visibleDocs.forEach((doc, i) => {\n        visibleDocIndicesMap[doc.originalIndex] = i;\n      });\n\n      const nodes = visibleDocs.map((doc, i) => ({\n        id: String(i),\n        title: doc.title,\n        fullText: doc.description,\n        tags: doc.tags,\n        readTime: doc.readTime,\n        releaseDate: doc.releaseDate,\n        isRead: doc.isRead,\n      }));\n\n      // Build link data\n      let links = documentSimilaritiesData\n        .filter((link) => {\n          return (\n            link.source in visibleDocIndicesMap &&\n            link.target in visibleDocIndicesMap\n          );\n        })\n        .map((link) => ({\n          ...link,\n          source: String(visibleDocIndicesMap[link.source]),\n          target: String(visibleDocIndicesMap[link.target]),\n        }));\n\n      if (!links || links.length === 0) {\n        links = [];\n        console.log(\n          \"No relevant pre-calculated similarities for visible docs.\"\n        );\n      }\n\n      initializeSimulation(\n        nodes,\n        links,\n        width,\n        height,\n        g,\n        svg,\n        visibleDocs.map((d) => d.readTime)\n      );\n    };\n\n    // Helpers for the simulation\n    const boundPosition = (pos, dimension, pad) => {\n      return Math.max(pad, Math.min(dimension - pad, pos));\n    };\n    const forceBoundary = (width, height, nodes) => {\n      const padding = 4;\n      const xMin = padding;\n      const xMax = width - padding;\n      const yMin = padding;\n      const yMax = height - padding;\n      const strength = 0.05;\n      function force(alpha) {\n        nodes.forEach((node) => {\n          if (node.x < xMin) node.vx += (xMin - node.x) * strength * alpha;\n          if (node.x > xMax) node.vx += (xMax - node.x) * strength * alpha;\n          if (node.y < yMin) node.vy += (yMin - node.y) * strength * alpha;\n          if (node.y > yMax) node.vy += (yMax - node.y) * strength * alpha;\n        });\n      }\n      return force;\n    };\n    const normalizeReadTime = (readTime, minT, maxT) => {\n      const minR = 5,\n        maxR = 20;\n      if (maxT === minT) return (minR + maxR) / 2;\n      const logMin = Math.log(minT + 1);\n      const logMax = Math.log(maxT + 1);\n      const logVal = Math.log(readTime + 1);\n      return ((logVal - logMin) / (logMax - logMin)) * (maxR - minR) + minR;\n    };\n\n    // Initialize the simulation\n    const initializeSimulation = (\n      nodes,\n      links,\n      width,\n      height,\n      g,\n      svg,\n      readTimes\n    ) => {\n      // Place nodes near center\n      nodes.forEach((node) => {\n        node.x = width / 2 + (Math.random() - 0.5) * 40;\n        node.y = height / 2 + (Math.random() - 0.5) * 40;\n      });\n\n      simulationRef.current = d3\n        .forceSimulation()\n        .nodes(nodes)\n        .force(\n          \"link\",\n          d3\n            .forceLink(links)\n            .id((d) => d.id)\n            .distance(50)\n            .strength(0.5)\n        )\n        .force(\"charge\", d3.forceManyBody().strength(-300))\n        .force(\"center\", d3.forceCenter(width / 2, height / 2))\n        .force(\"x\", d3.forceX(width / 2).strength(0.1))\n        .force(\"y\", d3.forceY(height / 2).strength(0.1))\n        .force(\n          \"collision\",\n          d3\n            .forceCollide()\n            .strength(0.1)\n            .radius(\n              (d) =>\n                normalizeReadTime(\n                  d.readTime,\n                  Math.min(...readTimes),\n                  Math.max(...readTimes)\n                ) + 10\n            )\n        )\n        .force(\"boundary\", forceBoundary(width, height, nodes))\n        .alpha(0.3)\n        .velocityDecay(0.4)\n        .alphaDecay(0.05)\n        .alphaMin(0.001);\n\n      const link = g\n        .append(\"g\")\n        .selectAll(\"line\")\n        .data(links)\n        .join(\"line\")\n        .attr(\"stroke\", \"var(--edge-color)\")\n        .attr(\"stroke-width\", (d) => d.width)\n        .attr(\"stroke-opacity\", \"var(--edge-opacity)\");\n\n      const nodeGroup = g.append(\"g\").attr(\"className\", \"nodes\");\n      const node = nodeGroup\n        .selectAll(\"g\")\n        .data(nodes)\n        .join(\"g\")\n        .attr(\"transform\", (d) => `translate(${d.x},${d.y})`)\n        .call(\n          d3\n            .drag()\n            .on(\"start\", dragstarted)\n            .on(\"drag\", dragged)\n            .on(\"end\", dragended)\n        );\n\n      node\n        .append(\"circle\")\n        .attr(\"r\", (d) =>\n          normalizeReadTime(\n            d.readTime,\n            Math.min(...readTimes),\n            Math.max(...readTimes)\n          )\n        )\n        .attr(\"fill\", (d) => (d.isRead ? \"#4a9eff\" : \"var(--node-color)\"))\n        .attr(\"stroke\", \"var(--node-stroke-color)\")\n        .on(\"mouseover\", function (event, d) {\n          d3.select(this).attr(\"fill\", \"#8ACE00\");\n          link\n            .attr(\"stroke\", (l) =>\n              l.source.id === d.id || l.target.id === d.id\n                ? \"#8ACE00\"\n                : \"var(--edge-color)\"\n            )\n            .attr(\"stroke-width\", (l) =>\n              l.source.id === d.id || l.target.id === d.id ? 3 : l.width\n            );\n\n          // Title tooltip\n          const titleGroup = nodeGroup\n            .append(\"g\")\n            .attr(\"className\", \"node-title-group\")\n            .attr(\"transform\", `translate(${d.x},${d.y})`);\n          nodeTitleGroupRef.current = titleGroup;\n          titleGroup\n            .append(\"text\")\n            .attr(\"className\", \"node-title\")\n            .attr(\"x\", 10)\n            .attr(\"y\", 5)\n            .attr(\"fill\", \"var(--text-color)\")\n            .text(d.title);\n        })\n        .on(\"mouseout\", function (event, d) {\n          d3.select(this).attr(\"fill\", (d) =>\n            d.isRead ? \"#4a9eff\" : \"var(--node-color)\"\n          );\n          link\n            .attr(\"stroke\", \"var(--edge-color)\")\n            .attr(\"stroke-width\", (l) => l.width);\n\n          // Remove title\n          if (nodeTitleGroupRef.current) {\n            nodeTitleGroupRef.current.remove();\n            nodeTitleGroupRef.current = null;\n          }\n        });\n\n      simulationRef.current.on(\"tick\", () => {\n        link\n          .attr(\"x1\", (d) => boundPosition(d.source.x, width, -200))\n          .attr(\"y1\", (d) => boundPosition(d.source.y, height, -200))\n          .attr(\"x2\", (d) => boundPosition(d.target.x, width, -200))\n          .attr(\"y2\", (d) => boundPosition(d.target.y, height, -200));\n\n        node.attr(\"transform\", (d) => {\n          const x = boundPosition(d.x, width, -200);\n          const y = boundPosition(d.y, height, -200);\n          return `translate(${x},${y})`;\n        });\n      });\n    };\n\n    // Drag handlers\n    const dragstarted = (event, d) => {\n      if (!event.active) simulationRef.current.alphaTarget(0.01).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n      // Increase link strength\n      simulationRef.current.force(\"link\").strength(0.8);\n      simulationRef.current.alphaTarget(0.3).restart();\n    };\n    const dragged = (event, d) => {\n      simulationRef.current.alphaTarget(0.01);\n      d.fx = boundPosition(event.x, width, -200);\n      d.fy = boundPosition(event.y, height, -200);\n    };\n    const dragended = (event, d) => {\n      if (!event.active) simulationRef.current.alphaTarget(0.01);\n      d.fx = null;\n      d.fy = null;\n    };\n\n    if (isSmallScreen) return null;\n    if (error) {\n      return (\n        <div\n          className=\"flex items-center justify-center h-32 rounded-lg\"\n          style={{\n            backgroundColor: \"var(--graph-background)\",\n            color: \"var(--text-color)\",\n          }}\n        >\n          <p className=\"text-red-600\">{error}</p>\n        </div>\n      );\n    }\n\n    return <div ref={containerRef} className=\"w-full h-full\" />;\n  };\n\n  // --- JSX Markup ---\n  return (\n    <>\n      {/* Metadata */}\n      <meta charSet=\"UTF-8\" />\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      <title>bb.radz</title>\n\n      <canvas\n        id=\"gameOfLife\"\n        className=\"game-of-life\"\n        width=\"200\"\n        height=\"400\"\n      ></canvas>\n\n      {/* Header */}\n      <header className=\"header\">\n        <div className=\"logo-section\">\n          <p className=\"logo\">BBradz</p>\n          <button\n            className=\"theme-toggle\"\n            onClick={toggleTheme}\n            aria-label=\"Toggle theme\"\n          >\n            <svg\n              className=\"sun-icon\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <circle cx=\"12\" cy=\"12\" r=\"4\"></circle>\n              <path d=\"M12 2v2\"></path>\n              <path d=\"M12 20v2\"></path>\n              <path d=\"M4.93 4.93l1.41 1.41\"></path>\n              <path d=\"M17.66 17.66l1.41 1.41\"></path>\n              <path d=\"M2 12h2\"></path>\n              <path d=\"M20 12h2\"></path>\n              <path d=\"M6.34 17.66l-1.41 1.41\"></path>\n              <path d=\"M19.07 4.93l-1.41 1.41\"></path>\n            </svg>\n            <svg\n              className=\"moon-icon\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\n            </svg>\n          </button>\n        </div>\n        <nav className=\"nav-links\">\n          <Link to=\"/posts\" className=\"nav-link\">\n            Posts\n          </Link>\n          <Link to=\"/library\" className=\"nav-link\">\n            Library\n          </Link>\n          <Link to=\"/\" className=\"nav-link\">\n            About Me\n          </Link>\n        </nav>\n      </header>\n\n      <div className=\"reading-list-layout\">\n        <div className=\"lib-container\">\n          <h1 className=\"name\" style={{ marginBottom: \"10px\" }}>\n            Library\n          </h1>\n\n          {/* SEARCH BAR */}\n          <div className=\"search-bar\">\n            <input\n              type=\"text\"\n              id=\"search\"\n              placeholder=\"Search by term...\"\n              onInput={(e) => {\n                // Filter in React state\n                const filtered = performSearch(e.target.value, readingListData);\n                setCurrentReadingListData(filtered);\n\n                // Rebuild the reading list DOM\n                window.initializeReadingListHTML(filtered);\n\n                // Let the graph know\n                setTimeout(() => {\n                  window.dispatchEvent(window.documentVisibilityChanged);\n                }, 0);\n              }}\n            />\n            {/* If you want a separate search button, you can do:\n            <button\n              onClick={() => {\n                const searchEl = document.getElementById(\"search\");\n                if (!searchEl) return;\n                const filtered = performSearch(searchEl.value, readingListData);\n                setCurrentReadingListData(filtered);\n                window.initializeReadingListHTML(filtered);\n                setTimeout(() => {\n                  window.dispatchEvent(window.documentVisibilityChanged);\n                }, 0);\n              }}\n            >\n              Search\n            </button>\n            */}\n          </div>\n\n          <div className=\"sort-bar\">\n            <div className=\"sort-bar-buttons\">\n              {/* Sorting/Filtering Buttons, unchanged from your original. \n                  (They rely on \"window.toggleSort\" or \"window.toggleFilterType\", etc.)\n                  Make sure you have them in functionality.js or remove if unused. */}\n              <button\n                id=\"sort-release\"\n                onClick={(event) =>\n                  window.toggleSort(\n                    event.target,\n                    \"release\",\n                    \"desc\",\n                    currentReadingListData\n                  )\n                }\n              >\n                Sort by Release Date <span className=\"sort-arrow\"></span>\n              </button>\n              <button\n                id=\"sort-time\"\n                onClick={(event) =>\n                  window.toggleSort(\n                    event.target,\n                    \"time\",\n                    \"desc\",\n                    currentReadingListData\n                  )\n                }\n              >\n                Sort by Time to Read <span className=\"sort-arrow\"></span>\n              </button>\n              <button\n                id=\"filter-read\"\n                onClick={(event) =>\n                  window.toggleReadFilter(event.target, currentReadingListData)\n                }\n              >\n                Filter: All\n              </button>\n              <button\n                id=\"filter-YT\"\n                onClick={(event) =>\n                  window.toggleFilterType(\n                    event.target,\n                    \"YT\",\n                    currentReadingListData\n                  )\n                }\n              >\n                YT\n              </button>\n              <button\n                id=\"filter-Arxiv\"\n                onClick={(event) =>\n                  window.toggleFilterType(\n                    event.target,\n                    \"Arxiv\",\n                    currentReadingListData\n                  )\n                }\n              >\n                Arxiv\n              </button>\n              <button\n                id=\"filter-Site\"\n                onClick={(event) =>\n                  window.toggleFilterType(\n                    event.target,\n                    \"Site\",\n                    currentReadingListData\n                  )\n                }\n              >\n                Site\n              </button>\n            </div>\n            <div id=\"active-tags\" className=\"active-tag\"></div>\n          </div>\n\n          {/* The reading list's UL, dynamically rebuilt by window.initializeReadingListHTML */}\n          <ul id=\"reading-list\"></ul>\n        </div>\n\n        {/* GRAPH */}\n        <div className=\"graph-container\">\n          <div id=\"root\" className=\"graph-inner\">\n            <div className=\"space-y-6\">\n              <DocumentGraph\n                width={400}\n                height={400}\n                readingListData={currentReadingListData}\n                documentSimilaritiesData={documentSimilaritiesData}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <button\n        ref={scrollToTopButtonRef}\n        onClick={scrollToTop}\n        className=\"scroll-to-top\"\n        aria-label=\"Scroll to top\"\n      >\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 19V5\"\n            stroke=\"#fff\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n          <path\n            d=\"M5 12L12 5L19 12\"\n            stroke=\"#fff\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n        </svg>\n      </button>\n    </>\n  );\n}\n\nexport default Library;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}